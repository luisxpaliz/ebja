<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="/plantillas/contenedorBloqueo.xhtml"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	>

	<ui:define name="titulo">
        ADMINISTRACIÓN NOTAS 
  	</ui:define>

	<ui:define name="contenido">

		<style>
.contenido {
	background: #fff;
}
</style>
		<div>
			<h:form id="frmForm">
				<p:panel styleClass="contienePanelBusqueda-ebja">
					<f:facet name="header">Búsqueda de Notas:</f:facet>
					<p:panelGrid id="pnlBusqueda" cellpadding="10" cellspacing="1"
						border="1" styleClass="panelBusqueda-ebja">
						<p:row>
							<p:column styleClass="ebja_notas_tblNombreCol004">
								<p:panelGrid styleClass="ebja_notas_tblbusqueda_001"  border="1">
								<row>
								<div class="userIcon-Seleccion-Docentes-ebja"></div>
								</row>
								<row>
								<p:column styleClass="ebja_notas_tblLabel_002">
								  <h:outputText value=" Nombre Docente: "
									 />
								</p:column>
								<p:column styleClass="ebja_notas_tblLabel_003">
								   <h:outputText value="#{notasBean.nombreDocenteLogueado}"/>
								</p:column>
								</row>
							   </p:panelGrid>	
							</p:column>
							<p:column styleClass="ebja_notas_tblDescripcionCol005">
							<p:panelGrid styleClass="ebja_notas_tblbusqueda_001"  border="1" columns="4">
								<p:column styleClass="ebja_notas_tblNombreCol004">
								<h:outputText value=" Institución: "/>
								</p:column>
								<p:column styleClass="ebja_notas_tblNombreCol004">
								<p:selectOneMenu id="combListInstituciones"
									value="#{notasBean.institucionSeleccionada}"
									styleClass="comboModuloNuevoNemonico-Asistencia-ebja">
									<f:selectItem itemLabel="Seleccionar Institución" />
									<f:selectItems value="#{notasBean.listaInstituciones}"
										var="varInstituciones" itemLabel="#{varInstituciones.descripcion}"
										itemValue="#{varInstituciones.amie}"></f:selectItems>
									 <p:ajax execute="@this" update="combListProgramaEbja" listener="#{notasBean.consultarPrograma}"/>
								</p:selectOneMenu>
								</p:column>
								<p:column styleClass="ebja_notas_tblNombreCol004">
								<h:outputText value=" Programa: "/>
								</p:column>
					             <p:column styleClass="ebja_notas_tblNombreCol004">
								<p:selectOneMenu id="combListProgramaEbja"
									value="#{notasBean.programaSeleccionado}"
									styleClass="comboModuloNuevoNemonico-Asistencia-ebja">
									<f:selectItem itemLabel="Seleccionar Programa" />
									<f:selectItems value="#{notasBean.listaProgramas}"
										var="varPrograma" itemLabel="#{varPrograma.nombre}"
										itemValue="#{varPrograma.nemonico}"></f:selectItems>
								<p:ajax execute="@this" update="combListGrado" listener="#{notasBean.consultarGrado}"/>
								</p:selectOneMenu>
								</p:column>
								<p:column styleClass="ebja_notas_tblNombreCol004">
								<h:outputText value=" Grado: "/>
								</p:column>
								<p:column styleClass="ebja_notas_tblNombreCol004">
								<p:selectOneMenu id="combListGrado"
									value="#{notasBean.gradoSeleccionado}"
									styleClass="comboModuloNuevoNemonico-Asistencia-ebja">
									<f:selectItem itemLabel="Seleccionar Programa" />
									<f:selectItems value="#{notasBean.listaGrados}"
										var="varGrado" itemLabel="#{varGrado.descripcion}"
										itemValue="#{varGrado.nemonico}"></f:selectItems>
							   <p:ajax execute="@this" update="combListParalelo" listener="#{notasBean.consultarParalelo}"/>
								</p:selectOneMenu>
								</p:column>
								<p:column styleClass="ebja_notas_tblNombreCol004">
								<h:outputText value=" Paralelo: "/>
								</p:column>
								<p:column styleClass="ebja_notas_tblNombreCol004">
								<p:selectOneMenu id="combListParalelo"
									value="#{notasBean.paraleloSeleccionado}"
									styleClass="comboModuloNuevoNemonico-Asistencia-ebja">
									<f:selectItem itemLabel="Seleccionar Programa" />
									<f:selectItems value="#{notasBean.listaParalelo}"
										var="varParalelo" itemLabel="#{varParalelo.descripcion}"
										itemValue="#{varParalelo.id}"></f:selectItems>
								<p:ajax execute="@this" update="combListAsignatura" listener="#{notasBean.consultarAsignatura}"/>
								</p:selectOneMenu>
								</p:column>
								<p:column styleClass="ebja_notas_tblNombreCol004">
								<h:outputText value=" Asignatura: "/>
								</p:column>
								<p:column styleClass="ebja_notas_tblNombreCol004">
								<p:selectOneMenu id="combListAsignatura"
									value="#{notasBean.asignaturaSeleccionada}"
									styleClass="comboModuloNuevoNemonico-Asistencia-ebja">
									<f:selectItem itemLabel="Seleccionar Asignatura" />
									<f:selectItems value="#{notasBean.listaAsignatura}"
										var="varAsignatura" itemLabel="#{varAsignatura.nemonico}"
										itemValue="#{varAsignatura.id}"></f:selectItems>
								</p:selectOneMenu>
								</p:column>
								<p:column styleClass="ebja_notas_tblNombreCol004">
								<h:outputText value=" Nombre Alumno: "/>
								</p:column>
					             <p:column styleClass="ebja_notas_tblNombreCol004">
								<p:selectOneMenu id="combListProgramaEbja8"
									value="#{modeloAsistenciaBean.programaSeleccionado}"
									styleClass="comboModuloNuevoNemonico-Asistencia-ebja">
									<f:selectItem itemLabel="Seleccionar Programa" />
									<f:selectItems value="#{modeloAsistenciaBean.listaPrograma}"
										var="varPrograma" itemLabel="#{varPrograma.nombre}"
										itemValue="#{varPrograma.nemonico}"></f:selectItems>
								</p:selectOneMenu>
								</p:column>
							</p:panelGrid>
							<p:panelGrid styleClass="ebja_notas_tblbusquedaAlumno_008"  border="1" columns="2">
							    <p:row>
								<h:outputText styleClass="ebja_notas_inpNombreAlumno006"  value=" Nombre Alumno:"/>
								<p:inputText  styleClass="ebja_notas_inpNombreAlumno007" value="   "/>
								</p:row>
							</p:panelGrid>
							</p:column>
						</p:row>
					</p:panelGrid>
					<br></br>
					<p:messages id="messageAsistencia"
						style="width:100%; margin-top:3px;" />
					<h:panelGrid id="pnlIngresoRegistro" columns="1" border="0">
						<h:panelGroup style="display:block; text-align:center">
							<p:commandButton value="Consultar Notas"
								actionListener="#{notasBean.consultarNotas}"
								styleClass="botonBuscar-ebja-a4j"
								ajax="true"
								update=":#{p:component('formGuardarAsistencia')}" />
						</h:panelGroup>
					    <p:dataTable id="tblAsistencia" var="notas"
							value="#{notasBean.listaDatos}" scrollable="true"
							styleClass="tabla-Acuerdo-ebja" paginator="true" rows="10"
							paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							rowsPerPageTemplate="5,10,15">
   						    <p:columns value="#{notasBean.listacolumnas}" var="column">
   						    <f:facet name="header">
                                   <h:outputText value="#{column}" />
                            </f:facet>
           					<h:outputText value="#{notas[column]}"/>
               				</p:columns>
							<f:facet name="paginatorBottomRight">
								<p:commandButton type="button" icon="fa fa-sync" />
							</f:facet>
                       </p:dataTable>
					</h:panelGrid>
				</p:panel>
			</h:form>
			<h:form id="formGuardarAsistencia">
				<p:dialog header="Guardar Asistencia Seleccionada"
					widgetVar="popGuardarAsistencia" autosized="true" width="300"
					height="235">
					<div>
						<h:panelGrid id="pnlNuevoRegistroAsistencia" columns="2"
							cellpadding="5" cellspacing="1" border="0"
							styleClass="popUpCreacionAcuerdo-ebja"
							columnClasses="popUpBusqueda-primeraCol-ebja,popUpBusqueda-segundaCol-ebja"
							rendered="true">
							<h:outputText value=" Tipo Programa: " />
							<p:selectOneMenu id="combListProgramAsistencia"
								value="#{modeloAsistenciaBean.programaSeleccionadoGuardar}"
								styleClass="comboModuloNuevoNemonico-ebja" required="true"
								requiredMessage="Debe escojer un Programa para guardar el registro">
								<f:selectItem itemLabel="Seleccionar Programa" />
									<f:selectItems value="#{modeloAsistenciaBean.listaPrograma}"
										var="varPrograma" itemLabel="#{varPrograma.nombre}"
										itemValue="#{varPrograma.nemonico}"></f:selectItems>
							</p:selectOneMenu>
							<h:outputText value=" Tipo Asistencia: " />
							<p:selectOneMenu id="combListTipoAsistencia"
								value="#{modeloAsistenciaBean.tipoAsistenciaSeleccionada}"
								styleClass="comboModuloNuevoNemonico-ebja" required="true"
								requiredMessage="Debe escojer un Acuerdo para guardar el registro">
								<f:selectItem itemLabel="Seleccionar Tip. Asistencia" />
								<f:selectItems
									value="#{modeloAsistenciaBean.listaCatalogo}"
									var="varTipoAsis" itemLabel="#{varTipoAsis.nombre}"
									itemValue="#{varTipoAsis.nemonico}"></f:selectItems>
							</p:selectOneMenu>
							<h:outputText value=" % Parcial Asistencia: " />
							<p:inputText id="input-text-codigo" styleClass="inputText-ebja"
								value="#{modeloAsistenciaBean.asistenciaParcial}" required="true"
								requiredMessage="El campo 'Código' está vacío">
								<p:keyFilter mask="num" />
							</p:inputText>
							<h:outputText value=" % Materia Asistencia: " />
							<p:inputText id="input-text-nombre" styleClass="inputText-ebja"
								value="#{modeloAsistenciaBean.asistenciaMateria}" required="true"
								requiredMessage="El campo 'Nombre Acuerdo' está vacío">
								<p:keyFilter mask="num" />
							</p:inputText>
						</h:panelGrid>
					</div>
					<h:panelGrid columns="2"
						styleClass="popUpCreacionAcuerdoBotones-ebja"
						columnClasses="popUpBusqueda-botones-ebja,popUpBusqueda-botones-ebja"
						border="0">
						<p:commandButton id="guardarRegistroAsistencia" value="Guardar"
							styleClass="popUpBoton-ebja" ajax="true"
							actionListener="#{modeloAsistenciaBean.ejecutarCrearOEditarRegistro}"
							oncomplete="PF('popGuardarAsistencia').hide();"
							update=":#{p:component('messageAsistencia')},:#{p:component('tblAsistencia')}" />
						<p:commandButton id="cancelarRegistroModulo" value="Cancelar"
							styleClass="popUpBoton-ebja"
							oncomplete="PF('popGuardarAsistencia').hide();" />
					</h:panelGrid>
				</p:dialog>
			</h:form>


			<h:form>
				<p:dialog header="Inactivar Registro"
					widgetVar="popConfirmarInactivarAsistencia" autosized="false"
					width="250" height="100">
					<h:panelGrid border="0" columns="2"
						columnClasses="popUpBusqueda-primeraCol-ebja,popUpBusqueda-segundaCol-ebja">
						<div class="eliminar-archivo-ebja"></div>
						<h:outputLabel value="Está seguro que desea Inactivar Registro?"
							styleClass="texto-confirmar-borrar-archivo-ebja" />
					</h:panelGrid>
					<h:panelGrid columns="2"
						styleClass="popUpCreacionAcuerdoBotones-ebja"
						columnClasses="popUpBusqueda-botones-ebja,popUpBusqueda-botones-ebja"
						border="0">
						<p:commandButton value="Sí" styleClass="popUpBoton-ebja"
							ajax="true"
							actionListener="#{modeloAsistenciaBean.borrarAsistencia}"
							oncomplete="PF('popConfirmarInactivarAsistencia').hide();"
							update=":#{p:component('tblAsistencia')}" />
						<p:commandButton value="No" styleClass="popUpBoton-ebja"
							ajax="true"
							oncomplete="PF('popConfirmarInactivarAsistencia').hide();" />
					</h:panelGrid>
				</p:dialog>
			</h:form>

			<h:form>
				<p:dialog header="Activar Registro"
					widgetVar="popConfirmarActivarAsistencia" autosized="false"
					width="250" height="100">
					<h:panelGrid border="0" columns="2"
						columnClasses="popUpBusqueda-primeraCol-ebja,popUpBusqueda-segundaCol-ebja">
						<div class="eliminar-archivo-ebja"></div>
						<h:outputLabel value="Está seguro que desea Activar Registro?"
							styleClass="texto-confirmar-borrar-archivo-ebja" />
					</h:panelGrid>
					<h:panelGrid columns="2"
						styleClass="popUpCreacionAcuerdoBotones-ebja"
						columnClasses="popUpBusqueda-botones-ebja,popUpBusqueda-botones-ebja"
						border="0">
						<p:commandButton value="Sí" styleClass="popUpBoton-ebja"
							ajax="true"
							actionListener="#{modeloAsistenciaBean.activarAcuerdo}"
							oncomplete="PF('popConfirmarActivarAsistencia').hide();"
							update=":#{p:component('tblAsistencia')}" />
						<p:commandButton value="No" styleClass="popUpBoton-ebja"
							ajax="true"
							oncomplete="PF('popConfirmarActivarAsistencia').hide();" />
					</h:panelGrid>
				</p:dialog>
			</h:form>
			
			<h:form>
				<p:dialog header="Activar Registro"
					widgetVar="popUpValidarDocente" autosized="false"
					width="250" height="100">
					<h:panelGrid border="0" columns="2"
						columnClasses="popUpBusqueda-primeraCol-ebja,popUpBusqueda-segundaCol-ebja">
						<div class="eliminar-archivo-ebja"></div>
						<h:outputLabel value="Está seguro que desea Activar Registro?"
							styleClass="texto-confirmar-borrar-archivo-ebja" />
					</h:panelGrid>
					<h:panelGrid columns="2"
						styleClass="popUpCreacionAcuerdoBotones-ebja"
						columnClasses="popUpBusqueda-botones-ebja,popUpBusqueda-botones-ebja"
						border="0">
						<p:commandButton value="Sí" styleClass="popUpBoton-ebja"
							ajax="true"
							actionListener="#{modeloAsistenciaBean.activarAcuerdo}"
							oncomplete="PF('popConfirmarActivarAsistencia').hide();"
							update=":#{p:component('tblAsistencia')}" />
						<p:commandButton value="No" styleClass="popUpBoton-ebja"
							ajax="true"
							oncomplete="PF('popConfirmarActivarAsistencia').hide();" />
					</h:panelGrid>
				</p:dialog>
			</h:form>

		</div>
	</ui:define>
</ui:composition>
